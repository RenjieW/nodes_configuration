# Environment configuration

- Set the shell environment as bash in workers and servers. 
- In your home directory, depending on whether you need to use SketchDLC or not.

```
git clone https://github.com/RenjieW/nodes_configuration
git clone https://github.com/RenjieW/SketchDLC.git
```

- All switches use openvswitch for routing and the controller is in my cluster. Ususally, there is no need to log in to switches. 

# Training scripts

- Training scripts are all located in `/your/path/to/nodes_configuration/workers/training_scripts` 
- Take four machines as an example, usually I set machine 0 to machine 2 as workers and machine 3 as a server. 
- So you may run worker.sh in workers, server.sh and schedule.sh in the server. Those scripts do not require root privilege.
- You need to modify `DMLC_PS_ROOT_URI`, `DMLC_NODE_HOST` and etc parameters. For detailed information, you can refer to the official [guidance](https://mxnet.apache.org/api/faq/distributed_training) (the `Manually Launching Jobs` part).  
- To adjust the training hyper-parameters, you need to modify `COMMAND` in scripts (`model`, `batch-size`).
- You can also use ssh to launch distributed training tasks, please refer to the official [guidance](https://mxnet.apache.org/api/faq/distributed_training) (the `Using Launch.py` part).  

# Packets Capture

- During training, I use tcpdump to capture packets
  `sudo tcpdump -i enp6s0f3 ip -s 0 -w vgg11.pcap`
- You may find some files in `/mnt/data_trace`. Those are files generated by SketchDLC, if installed. If you need those files, remember rename them after training, or SketchDLC will just append new records to old files.

